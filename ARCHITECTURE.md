# ğŸ—ï¸ TinyTap.ink System Architecture

## ğŸ“ Complete System Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                             â”‚
â”‚                   (tiktok-downloader.html)                       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   TikTok     â”‚  â”‚   YouTube    â”‚  â”‚ File Hosting â”‚          â”‚
â”‚  â”‚  Downloader  â”‚  â”‚  Downloader  â”‚  â”‚   + QR Code  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Discord OAuth Login System                      â”‚   â”‚
â”‚  â”‚  â€¢ Login Button â†’ Discord OAuth                          â”‚   â”‚
â”‚  â”‚  â€¢ Verification Code Input (10 digits)                   â”‚   â”‚
â”‚  â”‚  â€¢ Attempt Counter (X/10)                                â”‚   â”‚
â”‚  â”‚  â€¢ Block Timer (10 minutes countdown)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP Requests
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         BACKEND SERVERS (Node.js)           â”‚
        â”‚                                             â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  File Server    â”‚  â”‚   Auth Server   â”‚ â”‚
        â”‚  â”‚  Port 3000      â”‚  â”‚   Port 3001     â”‚ â”‚
        â”‚  â”‚                 â”‚  â”‚                 â”‚ â”‚
        â”‚  â”‚ â€¢ /upload       â”‚  â”‚ â€¢ /auth/discord â”‚ â”‚
        â”‚  â”‚ â€¢ /:shortCode   â”‚  â”‚ â€¢ /auth/callbackâ”‚ â”‚
        â”‚  â”‚ â€¢ /files/:userIdâ”‚  â”‚ â€¢ /auth/verify  â”‚ â”‚
        â”‚  â”‚ â€¢ /file/:code   â”‚  â”‚ â€¢ /auth/resend  â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                    â”‚
                     â”‚                    â”‚
                     â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   MongoDB        â”‚  â”‚   MongoDB            â”‚
        â”‚   tinytap-       â”‚  â”‚   tinytap-auth       â”‚
        â”‚   filehost       â”‚  â”‚                      â”‚
        â”‚                  â”‚  â”‚ â€¢ verifications      â”‚
        â”‚ â€¢ files          â”‚  â”‚   - userId           â”‚
        â”‚   - userId       â”‚  â”‚   - code (10-digit)  â”‚
        â”‚   - filename     â”‚  â”‚   - attempts         â”‚
        â”‚   - shortCode    â”‚  â”‚   - blockedUntil     â”‚
        â”‚   - size         â”‚  â”‚   - createdAt (TTL)  â”‚
        â”‚   - uploadDate   â”‚  â”‚                      â”‚
        â”‚   - expiresAt    â”‚  â”‚                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚
                                        â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚    Discord API           â”‚
                          â”‚                          â”‚
                          â”‚ â€¢ OAuth 2.0              â”‚
                          â”‚ â€¢ Bot API                â”‚
                          â”‚ â€¢ Server Membership      â”‚
                          â”‚ â€¢ DM Sending             â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚
                                        â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚    Discord Server        â”‚
                          â”‚    ID: 1419161334...     â”‚
                          â”‚                          â”‚
                          â”‚ â€¢ Member verification    â”‚
                          â”‚ â€¢ Bot presence           â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚
                                        â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚    User Discord DMs      â”‚
                          â”‚                          â”‚
                          â”‚ â€¢ Verification codes     â”‚
                          â”‚ â€¢ Success messages       â”‚
                          â”‚ â€¢ Error messages         â”‚
                          â”‚ â€¢ Block notifications    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Discord OAuth Flow Diagram

```
USER                 FRONTEND              AUTH SERVER           DISCORD API          DISCORD BOT          MONGODB
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚  Click "Login"        â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚  Redirect to Discord â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  OAuth Authorize    â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚   Authorize App       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Callback with code â”‚                    â”‚                 â”‚
 â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚  POST /callback      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Exchange for token â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Return access_tokenâ”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Get user info      â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Return user data   â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Check membership (Bot API)              â”‚                 â”‚
 â”‚                       â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Return member status                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Generate 10-digit code                  â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Store code with TTL                                       â”‚
 â”‚                       â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Send DM with code                       â”‚                 â”‚
 â”‚                       â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚   Receive DM          â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
 â”‚  "Your code: 1234567890"                     â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚  Show verification UIâ”‚                     â”‚                    â”‚                 â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚  Enter code           â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚  POST /verify        â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Check code in MongoDB                                     â”‚
 â”‚                       â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  [If correct]       â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚  Send success DM                         â”‚                 â”‚
 â”‚                       â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚   Success DM          â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
 â”‚  "âœ… Verification Successful!"                â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚  Return user data    â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚  Complete login      â”‚                     â”‚                    â”‚                 â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  (localStorage)      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚  âœ… LOGGED IN         â”‚                      â”‚                     â”‚                    â”‚                 â”‚
 â”‚                       â”‚                      â”‚                     â”‚                    â”‚                 â”‚
```

---

## ğŸš« Rate Limiting Flow

```
USER enters wrong code
        â”‚
        â–¼
AUTH SERVER increments attempts
        â”‚
        â–¼
MongoDB updates attempts counter
        â”‚
        â–¼
    Attempts < 10?
        â”‚
        â”œâ”€â”€â”€ YES â”€â”€> Send "Wrong code" DM
        â”‚            Show attempt counter (X/10)
        â”‚            Allow retry
        â”‚
        â””â”€â”€â”€ NO â”€â”€> Set blockedUntil = NOW + 10 minutes
                    Save to MongoDB
                    Send "Blocked" DM
                    Return blocked status
                    â”‚
                    â–¼
                FRONTEND shows block timer
                Countdown: 9m 59s â†’ 0m 0s
                    â”‚
                    â–¼
                Timer reaches 0
                    â”‚
                    â–¼
                Page reloads automatically
                User can try again
```

---

## ğŸ“Š Data Flow Diagram

### File Upload Flow
```
USER drags file
    â†“
Frontend: FileReader reads file
    â†“
POST /upload with FormData
    â†“
File Server: Multer saves to ./uploads/
    â†“
Generate shortCode with nanoid
    â†“
Save metadata to MongoDB (files collection)
    â†“
Return shortCode to frontend
    â†“
Frontend: Display link + QR code
```

### File Download Flow
```
USER clicks tinytap.ink/:shortCode
    â†“
GET /:shortCode
    â†“
File Server: Query MongoDB for file
    â†“
Found? 
â”œâ”€â”€ YES: Stream file from ./uploads/
â””â”€â”€ NO: Return 404 error
```

---

## ğŸ—„ï¸ Database Schemas

### Files Collection (tinytap-filehost)
```javascript
{
  _id: ObjectId("..."),
  userId: "123456789012345678",
  filename: "document.pdf",
  originalName: "My Document.pdf",
  shortCode: "abc123xyz",
  size: 1048576,
  mimetype: "application/pdf",
  uploadDate: ISODate("2024-01-01T12:00:00Z"),
  expiresAt: ISODate("2024-01-08T12:00:00Z"),
  downloadCount: 5
}
```

### Verifications Collection (tinytap-auth)
```javascript
{
  _id: ObjectId("..."),
  userId: "123456789012345678",
  code: "1234567890",
  attempts: 3,
  blockedUntil: null, // or ISODate if blocked
  createdAt: ISODate("2024-01-01T12:00:00Z"),
  // Auto-deletes after 5 minutes (TTL index)
}
```

---

## ğŸŒ API Endpoints

### File Server (Port 3000)
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/upload` | Upload file |
| GET | `/:shortCode` | Download file |
| GET | `/files/:userId` | Get user's files |
| DELETE | `/file/:shortCode` | Delete file |
| GET | `/health` | Health check |

### Auth Server (Port 3001)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/auth/discord` | Start OAuth flow |
| POST | `/auth/discord/callback` | OAuth callback |
| POST | `/auth/verify` | Verify code |
| POST | `/auth/resend` | Resend code |
| GET | `/health` | Health check |

---

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: Discord OAuth 2.0            â”‚
â”‚  - Secure token exchange               â”‚
â”‚  - Access token validation             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: Server Membership Check      â”‚
â”‚  - Discord API verification            â”‚
â”‚  - Must be in server (ID: 1419161...)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: 10-Digit Code Verification   â”‚
â”‚  - Random 1000000000-9999999999        â”‚
â”‚  - Delivered via Discord bot DM        â”‚
â”‚  - 5-minute expiration (MongoDB TTL)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: Rate Limiting                â”‚
â”‚  - 10 attempts maximum                 â”‚
â”‚  - Per-user attempt tracking           â”‚
â”‚  - 10-minute block on failure          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 5: Real-time Feedback           â”‚
â”‚  - Discord DM notifications            â”‚
â”‚  - Attempt counter display             â”‚
â”‚  - Block countdown timer               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
          âœ… ACCESS GRANTED
```

---

## ğŸ¯ Technology Stack

| Component | Technology |
|-----------|-----------|
| Frontend | HTML5, CSS3, Vanilla JavaScript |
| Backend | Node.js, Express.js |
| Database | MongoDB (Mongoose ODM) |
| File Upload | Multer |
| Authentication | Discord OAuth 2.0 |
| Bot API | Discord.js (via axios) |
| Short Links | nanoid |
| QR Codes | QR Server API |
| Scheduled Jobs | node-cron |
| Video APIs | TikTok (tiklydown.me), YouTube (RapidAPI) |

---

## ğŸ“ˆ Performance Specs

| Feature | Specification |
|---------|--------------|
| Max File Size | 5 GB |
| Code Expiration | 5 minutes |
| Block Duration | 10 minutes |
| Max Attempts | 10 |
| File Retention | 7 days |
| MongoDB TTL | Auto-cleanup |
| Concurrent Users | Scalable |
| Response Time | < 200ms |

---

**System designed for security, scalability, and user experience! ğŸš€**
